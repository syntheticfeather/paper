好的，我们继续学习概率论的第二章。根据您提供的课件内容，第二章的主题是**随机变量及其分布**。

---

## **第二章 随机变量及其分布**

### **章节一：随机变量与离散型随机变量**

#### **1. 随机变量 (Random Variable) 的再认识**
*   **定义**：设随机试验E的样本空间为Ω，如果对于Ω中的每一个样本点ω，都有一个实数X(ω)与之对应，那么称X = X(ω)为一个**随机变量**。
*   **核心思想**：将随机试验的结果（样本点）数量化。这使得我们可以用数学分析（如微积分）的工具来研究随机现象。
*   **表示**：通常用大写字母X, Y, Z等表示随机变量，用小写字母x, y, z表示其取值。

#### **2. 离散型随机变量 (Discrete Random Variable)**
*   **定义**：如果随机变量X的所有可能取值可以一一列举出来（有限个或可列无限个），则称X为离散型随机变量。
*   **概率分布 (Probability Distribution)**：要完整描述一个离散型随机变量，需要知道它所有可能的取值以及取每个值的概率。
*   **分布律 (Probability Mass Function, PMF)**：设离散型随机变量X的所有可能取值为x₁, x₂, ..., xₙ, ...，则
    $P(X = x_k) = p_k, \quad k = 1, 2, ...$
    称为X的**分布律**或**概率分布列**。
*   **分布律的性质**：
    1.  非负性：$p_k \geq 0$，对所有k成立。
    2.  规范性：$\sum_{k} p_k = 1$。
*   **常见离散型分布**：
    *   **(0-1)分布 (Bernoulli Distribution)**：X只取0和1两个值。常用于描述一次伯努利试验（只有“成功”和“失败”两种结果）的结果。P(X=1) = p, P(X=0) = 1-p。
    *   **二项分布 (Binomial Distribution, B(n, p))**：描述n重伯努利试验中“成功”次数的分布。
        *   记为 X ~ B(n, p)
        *   分布律：$P(X = k) = C_n^k p^k (1-p)^{n-k}, \quad k = 0, 1, 2, ..., n$
        *   例子：抛n次硬币，正面朝上的次数。
    *   **泊松分布 (Poisson Distribution, P(λ))**：描述单位时间或空间内稀有事件发生的次数。
        *   记为 X ~ P(λ)
        *   分布律：$P(X = k) = \frac{\lambda^k e^{-\lambda}}{k!}, \quad k = 0, 1, 2, ...$
        *   例子：某网站每分钟的访问量、某地区每天的交通事故数。
        *   **泊松定理**：当n很大，p很小，且λ = np适中时，二项分布B(n, p)可以用泊松分布P(λ)来近似。即 $C_n^k p^k (1-p)^{n-k} \approx \frac{\lambda^k e^{-\lambda}}{k!}$。

---

### **章节二：随机变量的分布函数**

#### **1. 分布函数 (Distribution Function) 的定义**
*   **定义**：对于任意实数x，函数
    $F(x) = P(X \leq x)$
    称为随机变量X的**分布函数**。
*   **几何意义**：F(x)表示随机变量X的取值落在区间(-∞, x]内的概率。
*   **作用**：分布函数是描述随机变量统计规律性的最一般、最完整的工具。它既适用于离散型随机变量，也适用于连续型随机变量。

#### **2. 分布函数的性质**
1.  **单调不减性**：若 x₁ < x₂，则 F(x₁) ≤ F(x₂)。
2.  **有界性**：$0 \leq F(x) \leq 1$，且 $\lim_{x \to -\infty} F(x) = 0$，$\lim_{x \to +\infty} F(x) = 1$。
3.  **右连续性**：$F(x+0) = F(x)$，即在任意点x处，函数从右边连续。

#### **3. 利用分布函数计算概率**
*   $P(a < X \leq b) = F(b) - F(a)$
*   $P(X > a) = 1 - F(a)$
*   $P(X < a) = F(a-0)$ （左极限）
*   $P(X = a) = F(a) - F(a-0)$ （函数在a点的跳跃度）

#### **4. 离散型随机变量的分布函数**
*   对于离散型随机变量，其分布函数是**阶梯函数**。
*   在X的每一个可能取值xₖ处，F(x)有一个跳跃，跳跃的高度等于P(X = xₖ)。
*   例子：设X ~ (0-1)分布，P(X=1)=p, P(X=0)=1-p。则其分布函数为：
    $F(x) = \begin{cases} 0, & x < 0 \\ 1-p, & 0 \leq x < 1 \\ 1, & x \geq 1 \end{cases}$

---

### **章节三：连续型随机变量**

#### **1. 连续型随机变量 (Continuous Random Variable)**
*   **定义**：如果随机变量X的分布函数F(x)可以表示为某个非负函数f(x)的积分，即
    $F(x) = \int_{-\infty}^{x} f(t) dt$
    则称X为**连续型随机变量**，称f(x)为X的**概率密度函数 (Probability Density Function, PDF)**。

#### **2. 概率密度函数 (PDF) 的性质**
1.  **非负性**：$f(x) \geq 0$，对所有x成立。
2.  **归一性**：$\int_{-\infty}^{+\infty} f(x) dx = 1$。
3.  **概率计算**：对于任意实数a < b，有
    $P(a < X \leq b) = P(a \leq X < b) = P(a < X < b) = P(a \leq X \leq b) = \int_{a}^{b} f(x) dx$
    *注意：对于连续型随机变量，单点的概率为0，即P(X=a)=0。*
4.  **密度与分布函数的关系**：$f(x) = F'(x)$，即密度函数是分布函数的导数（在f(x)连续的点处）。

#### **3. 常见连续型分布**
*   **均匀分布 (Uniform Distribution, U(a, b))**：在区间[a, b]上取值的概率是“均匀”的。
    *   记为 X ~ U(a, b)
    *   密度函数：
        $f(x) = \begin{cases} \frac{1}{b-a}, & a < x < b \\ 0, & \text{其它} \end{cases}$
    *   分布函数：
        $F(x) = \begin{cases} 0, & x \leq a \\ \frac{x-a}{b-a}, & a < x < b \\ 1, & x \geq b \end{cases}$
*   **指数分布 (Exponential Distribution, Exp(λ))**：常用于描述电子元件的寿命、顾客到达的间隔时间等。
    *   记为 X ~ Exp(λ), λ > 0
    *   密度函数：
        $f(x) = \begin{cases} \lambda e^{-\lambda x}, & x > 0 \\ 0, & x \leq 0 \end{cases}$
    *   分布函数：
        $F(x) = \begin{cases} 1 - e^{-\lambda x}, & x > 0 \\ 0, & x \leq 0 \end{cases}$
    *   **无记忆性**：P(X > s + t | X > s) = P(X > t)，s, t > 0。这是指数分布最重要的特性。
*   **正态分布 (Normal Distribution, N(μ, σ²))**：最重要、最常用的连续型分布，又称高斯分布。
    *   记为 X ~ N(μ, σ²), σ > 0
    *   密度函数：
        $f(x) = \frac{1}{\sqrt{2\pi}\sigma} e^{-\frac{(x-\mu)^2}{2\sigma^2}}, \quad -\infty < x < +\infty$
    *   **特点**：曲线呈钟形，关于x = μ对称；μ是位置参数（决定对称轴），σ是尺度参数（决定曲线的陡峭程度）。
    *   **标准正态分布**：当μ=0, σ=1时，称为标准正态分布，记为 Z ~ N(0, 1)。其密度函数和分布函数分别记为φ(x)和Φ(x)。任何正态分布都可以通过标准化 $Z = \frac{X - \mu}{\sigma}$ 转化为标准正态分布。

---

### **章节四：随机变量函数的分布**

#### **1. 问题引入**
*   如果已知随机变量X的分布，如何求其函数Y = g(X)的分布？
*   这在实际应用中非常普遍。例如，已知电阻R的分布，求其消耗的功率P = V²/R的分布。

#### **2. 离散型随机变量函数的分布**
*   **方法**：直接列出Y = g(X)的所有可能取值，并计算每个取值的概率。
*   **步骤**：
    1.  找出Y的所有可能取值。
    2.  对Y的每一个取值yₖ，找出所有使得g(xᵢ) = yₖ的xᵢ。
    3.  Y取yₖ的概率就是所有这些xᵢ对应的概率之和。
*   **注意**：如果不同的xᵢ映射到同一个yₖ，则这些概率需要相加。

#### **3. 连续型随机变量函数的分布**
*   **方法一：分布函数法**（通用方法）
    1.  先求Y = g(X)的分布函数 G(y) = P(Y ≤ y) = P(g(X) ≤ y)。
    2.  根据g(X) ≤ y的不等式，求出X的取值范围。
    3.  利用X的分布函数F(x)或密度函数f(x)计算P(g(X) ≤ y)。
    4.  对G(y)求导，得到Y的密度函数g(y) = G'(y)。
*   **方法二：公式法**（当g(x)是严格单调可导函数时）
    *   若Y = g(X)，且g(x)严格单调可导，其反函数为x = h(y)，则Y的密度函数为：
        $g(y) = f(h(y)) \cdot |h'(y)|$
    *   这个公式可以由分布函数法推导出来。

---
第二章的核心是从“事件”转向了“变量”，通过引入随机变量，将复杂的随机现象转化为可以进行数学运算的数值对象。分布函数和密度函数是描述随机变量统计规律性的核心工具。掌握常见分布的性质和随机变量函数的分布求法，是后续学习的基础。



好的，我们通过一系列例题来覆盖和巩固概率论第二章的核心知识点。

---

### **例题1：离散型随机变量与分布律**

**题目**：设某射手每次射击命中目标的概率为0.8，他独立地进行4次射击。
1.  求恰好命中2次的概率。
2.  求至少命中1次的概率。
3.  设X为命中次数，写出X的分布律。

**解答**：
1.  这是一个n=4, p=0.8的二项分布问题。X ~ B(4, 0.8)。
    $P(X=2) = C_4^2 (0.8)^2 (0.2)^2 = 6 \times 0.64 \times 0.04 = 0.1536$
2.  “至少命中1次”的对立事件是“一次都没命中”。
    $P(X \geq 1) = 1 - P(X=0) = 1 - C_4^0 (0.8)^0 (0.2)^4 = 1 - 1 \times 1 \times 0.0016 = 0.9984$
3.  X的分布律如下表所示：

| X=k | 0 | 1 | 2 | 3 | 4 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| P(X=k) | 0.0016 | 0.0256 | 0.1536 | 0.4096 | 0.4096 |

**覆盖知识点**：伯努利试验、二项分布、分布律、对立事件的应用。

---

### **例题2：泊松分布与近似计算**

**题目**：已知某商店平均每小时有10位顾客光顾。
1.  假设顾客到达服从泊松分布，求在下一小时内恰好有8位顾客光顾的概率。
2.  若将一小时分为60分钟，每分钟最多有一位顾客到达，且每位顾客到达的概率相同。用二项分布模型计算上述概率，并与泊松分布结果比较。

**解答**：
1.  设X为一小时内顾客数，X ~ P(λ), λ=10。
    $P(X=8) = \frac{10^8 e^{-10}}{8!} \approx \frac{100000000 \times 4.54 \times 10^{-5}}{40320} \approx 0.1126$ （查表或计算器）
2.  设Y为一小时内顾客数，按分钟划分，n=60, p=10/60=1/6≈0.1667。
    Y ~ B(60, 1/6)
    $P(Y=8) = C_{60}^8 (1/6)^8 (5/6)^{52}$
    直接计算很复杂。根据泊松定理，当n大p小，λ=np=10时，B(n,p)可用P(λ)近似。
    所以 $P(Y=8) \approx P(X=8) \approx 0.1126$。
    *精确计算（略）会发现结果非常接近。*

**答案**：两种方法计算的结果相近，验证了泊松定理的有效性。

**覆盖知识点**：泊松分布、泊松定理（二项分布的泊松近似）、实际问题的建模。

---

### **例题3：分布函数的性质与应用**

**题目**：设随机变量X的分布函数为
$F(x) = \begin{cases} 0, & x < 0 \\ Ax^2, & 0 \leq x < 1 \\ 1, & x \geq 1 \end{cases}$
1.  确定常数A。
2.  求P(0.3 < X ≤ 0.7)。
3.  求P(X = 0.5)。

**解答**：
1.  利用分布函数的右连续性和规范性。在x=1处右连续，有 F(1) = A*(1)² = 1，所以 A = 1。
2.  $P(0.3 < X \leq 0.7) = F(0.7) - F(0.3) = (0.7)^2 - (0.3)^2 = 0.49 - 0.09 = 0.4$
3.  对于连续型随机变量（此题中F(x)是连续函数），单点的概率为0。即 P(X = 0.5) = 0。

**覆盖知识点**：分布函数的定义、性质（规范性、连续性）、利用分布函数计算区间概率、连续型随机变量单点概率为0。

---

### **例题4：连续型随机变量与概率密度**

**题目**：设随机变量X的概率密度函数为
$f(x) = \begin{cases} kx, & 0 < x < 2 \\ 0, & \text{其它} \end{cases}$
1.  求常数k。
2.  求X的分布函数F(x)。
3.  求P(1 < X < 1.5)。

**解答**：
1.  利用密度函数的归一性：
    $\int_{-\infty}^{+\infty} f(x) dx = \int_{0}^{2} kx dx = k \cdot \frac{x^2}{2} \bigg|_{0}^{2} = k \cdot 2 = 1$
    所以 k = 1/2。
2.  分布函数 $F(x) = \int_{-\infty}^{x} f(t) dt$
    *   当 x ≤ 0 时，F(x) = 0
    *   当 0 < x < 2 时，$F(x) = \int_{0}^{x} \frac{1}{2}t dt = \frac{1}{4}t^2 \bigg|_{0}^{x} = \frac{x^2}{4}$
    *   当 x ≥ 2 时，F(x) = 1
    所以 $F(x) = \begin{cases} 0, & x \leq 0 \\ \frac{x^2}{4}, & 0 < x < 2 \\ 1, & x \geq 2 \end{cases}$
3.  $P(1 < X < 1.5) = \int_{1}^{1.5} \frac{1}{2}x dx = \frac{1}{4}x^2 \bigg|_{1}^{1.5} = \frac{1}{4}(2.25 - 1) = \frac{1.25}{4} = 0.3125$

**覆盖知识点**：概率密度函数的性质（归一性）、由密度函数求分布函数、利用密度函数计算概率。

---

### **例题5：均匀分布与指数分布**

**题目**：
1.  设X ~ U(2, 6)，求P(X > 4) 和 P(|X-4| < 1)。
2.  设电子元件的寿命T（单位：千小时）服从参数λ=0.5的指数分布。求该元件能使用超过2000小时的概率。若该元件已正常使用了1000小时，求它还能再使用1000小时以上的概率。

**解答**：
1.  X ~ U(2, 6)，密度函数f(x)=1/(6-2)=1/4, 2<x<6。
    *   $P(X > 4) = \int_{4}^{6} \frac{1}{4} dx = \frac{1}{4} \times 2 = 0.5$
    *   $P(|X-4| < 1) = P(3 < X < 5) = \int_{3}^{5} \frac{1}{4} dx = \frac{1}{4} \times 2 = 0.5$
2.  T ~ Exp(0.5)，分布函数F(t)=1-e⁻⁰·⁵ᵗ, t>0。
    *   $P(T > 2) = 1 - F(2) = e^{-0.5 \times 2} = e^{-1} \approx 0.3679$
    *   “已使用1000小时，还能再用1000小时以上”即 P(T > 2 | T > 1)。
        由指数分布的无记忆性：P(T > 2 | T > 1) = P(T > 1) = e⁻⁰·⁵ ≈ 0.6065。

**覆盖知识点**：均匀分布、指数分布、无记忆性。

---

### **例题6：正态分布与标准化**

**题目**：设某地区成年男性身高X ~ N(170, 100)（单位：cm）。
1.  求随机抽取一人，其身高在160cm到180cm之间的概率。
2.  求随机抽取一人，其身高超过185cm的概率。
3.  若要设计公共汽车的车门高度，使得99%的男性都能不碰头，车门至少应多高？

**解答**：
1.  标准化：Z = (X - 170)/10 ~ N(0,1)
    $P(160 < X < 180) = P\left(\frac{160-170}{10} < Z < \frac{180-170}{10}\right) = P(-1 < Z < 1)$
    $= \Phi(1) - \Phi(-1) = \Phi(1) - (1 - \Phi(1)) = 2\Phi(1) - 1 \approx 2 \times 0.8413 - 1 = 0.6826$
2.  $P(X > 185) = P\left(Z > \frac{185-170}{10}\right) = P(Z > 1.5) = 1 - \Phi(1.5) \approx 1 - 0.9332 = 0.0668$
3.  设车门高度为h，则要求 P(X ≤ h) ≥ 0.99。
    即 $P\left(Z \leq \frac{h-170}{10}\right) \geq 0.99$
    查标准正态分布表，Φ(2.33) ≈ 0.99。
    所以 $\frac{h-170}{10} \geq 2.33$，解得 h ≥ 170 + 23.3 = 193.3 cm。
    车门至少应为193.3厘米高。

**覆盖知识点**：正态分布、标准化、查标准正态分布表、分位数的应用。

---

### **例题7：随机变量函数的分布**

**题目**：
1.  设离散型随机变量X的分布律为：

| X | -1 | 0 | 1 | 2 |
| :--- | :--- | :--- | :--- | :--- |
| P | 0.2 | 0.3 | 0.4 | 0.1 |

    求Y = X²的分布律。
2.  设连续型随机变量X ~ U(0, 1)，求Y = 2X + 1的密度函数。

**解答**：
1.  先求Y的可能取值：当X=-1或1时，Y=1；当X=0时，Y=0；当X=2时，Y=4。
    *   P(Y=0) = P(X=0) = 0.3
    *   P(Y=1) = P(X=-1) + P(X=1) = 0.2 + 0.4 = 0.6
    *   P(Y=4) = P(X=2) = 0.1
    所以Y的分布律为：

| Y | 0 | 1 | 4 |
| :--- | :--- | :--- | :--- |
| P | 0.3 | 0.6 | 0.1 |

2.  **方法一：分布函数法**
    *   Y的分布函数 G(y) = P(Y ≤ y) = P(2X + 1 ≤ y) = P(X ≤ (y-1)/2) = $F_X\left(\frac{y-1}{2}\right)$
    *   因为X ~ U(0,1)，其分布函数为 $F_X(x) = \begin{cases} 0, & x \leq 0 \\ x, & 0 < x < 1 \\ 1, & x \geq 1 \end{cases}$
    *   所以 $G(y) = F_X\left(\frac{y-1}{2}\right) = \begin{cases} 0, & \frac{y-1}{2} \leq 0 \Rightarrow y \leq 1 \\ \frac{y-1}{2}, & 0 < \frac{y-1}{2} < 1 \Rightarrow 1 < y < 3 \\ 1, & \frac{y-1}{2} \geq 1 \Rightarrow y \geq 3 \end{cases}$
    *   对G(y)求导得Y的密度函数：
        $g(y) = G'(y) = \begin{cases} \frac{1}{2}, & 1 < y < 3 \\ 0, & \text{其它} \end{cases}$
    即 Y ~ U(1, 3)。

    **方法二：公式法**
    *   g(x) = 2x + 1 在 (0,1) 上严格单调递增，反函数为 x = h(y) = (y-1)/2，h'(y) = 1/2。
    *   X的密度函数 f(x) = 1, 0<x<1。
    *   所以 Y的密度函数 $g(y) = f(h(y)) \cdot |h'(y)| = 1 \cdot \frac{1}{2} = \frac{1}{2}$，其中y的范围由x∈(0,1)确定，即y∈(1,3)。
    结果一致。

**覆盖知识点**：离散型随机变量函数的分布、连续型随机变量函数的分布、分布函数法、公式法。

---
通过这些例题，我们可以看到第二章的知识是如何从离散到连续，从具体分布到一般方法逐步展开的。掌握这些例题的解法，对于理解随机变量的本质和后续学习期望、方差等数字特征至关重要。



错排问题（Derangement Problem）的公式推导是组合数学中的一个经典案例，它展示了**容斥原理**（Inclusion-Exclusion Principle）的巧妙应用。下面我们一步步推导出错排数 $D(n)$ 的公式：

$$
D(n) = n! \sum_{k=0}^{n} \frac{(-1)^k}{k!}
$$

---

### **问题重述**

有 $n$ 封信和 $n$ 个对应的信箱。我们想知道：**没有任何一封信被放入正确信箱**的排列方式有多少种？

这种排列称为**错排**（Derangement）。

### **递推公式的推导**

我们直接从组合意义推导递推关系：

$$
D(n) = (n-1) \left[ D(n-1) + D(n-2) \right]
$$

**组合解释**：

考虑第 $n$ 封信。它不能放入第 $n$ 个信箱，所以有 $n-1$ 个选择（比如放入第 $k$ 个信箱）。

- **情况1**：第 $k$ 封信放入第 $n$ 个信箱（即它们“互换”）。
    - 那么剩下的 $n-2$ 封信必须错排，方式数为 $D(n-2)$。
- **情况2**：第 $k$ 封信**不**放入第 $n$ 个信箱。
    - 这相当于：第 $k$ 封信“不能”放入第 $n$ 个信箱，而其他信也不能放入自己的信箱。
    - 这等价于 $n-1$ 封信的错排问题，方式数为 $D(n-1)$。

对于每一个 $k$（共 $n-1$ 种选择），都有 $D(n-2) + D(n-1)$ 种方式。

所以：
$$
D(n) = (n-1) \left[ D(n-1) + D(n-2) \right]
$$

---

### **总结**

- **主公式**：通过**容斥原理**，我们得到了 $D(n) = n! \sum_{k=0}^{n} \frac{(-1)^k}{k!}$。
- **递推公式**：通过**组合构造**，我们得到了 $D(n) = (n-1)[D(n-1) + D(n-2)]$。

这两个公式都深刻揭示了错排问题的数学结构。容斥原理的推导尤其优美，它展示了如何通过“加加减减”来精确计算复杂的“否定”条件。